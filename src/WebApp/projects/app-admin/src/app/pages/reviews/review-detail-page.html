<div class="review-detail">
  <div class="page-header">
    <div>
      <h1 class="page-title">Review Details</h1>
      <div class="muted">Review #{{ reviewId() }}</div>
    </div>
    <div class="actions">
      <a class="btn btn--stroked" routerLink="/reviews">
        <span class="material-icons-outlined">arrow_back</span>
        Back
      </a>
    </div>
  </div>

  <div class="grid grid--2">
    <div class="card">
      <div class="card__header">
        <div>
          <div class="card__title">Review Content</div>
          <div class="card__subtitle">Rating and comment</div>
        </div>
        <span class="badge" [class]="getStatusClass()">{{ status() }}</span>
      </div>
      <div class="card__content">
        <div class="rating-display">
          <div class="rating-display__stars">
            @for (star of getStars(); track $index) {
              <span class="material-icons-outlined star" [class.star--filled]="star">star</span>
            }
          </div>
          <div class="rating-display__value">{{ rating() }}/5</div>
        </div>
        <div class="comment-display">
          <div class="comment-display__label">Comment</div>
          <div class="comment-display__text">{{ comment() }}</div>
        </div>
        <div class="date-display">
          <span class="muted">Submitted on {{ date() }}</span>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card__header">
        <div>
          <div class="card__title">Participants</div>
          <div class="card__subtitle">Reviewer and braider</div>
        </div>
      </div>
      <div class="card__content">
        <div class="participant">
          <div class="participant__label">Reviewer</div>
          <div class="participant__name">{{ userName() }}</div>
          <div class="participant__email">{{ userEmail() }}</div>
        </div>
        <div class="divider"></div>
        <div class="participant">
          <div class="participant__label">Braider</div>
          <div class="participant__name">{{ braiderName() }}</div>
        </div>
      </div>
    </div>

    <div class="card full-width">
      <div class="card__header">
        <div>
          <div class="card__title">Moderation</div>
          <div class="card__subtitle">Manage review status</div>
        </div>
      </div>
      <div class="card__content">
        <div class="actions">
          @if (status() !== 'approved') {
            <button class="btn btn--primary" (click)="approve()">
              <span class="material-icons-outlined">check_circle</span>
              Approve
            </button>
          }
          @if (status() !== 'flagged') {
            <button class="btn btn--stroked" (click)="flag()">
              <span class="material-icons-outlined">flag</span>
              Flag
            </button>
          }
          <button class="btn btn--warn" (click)="delete()">
            <span class="material-icons-outlined">delete</span>
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
