@startuml Backend Components

title HairPop Backend - Component Diagram

skinparam backgroundColor #FEFEFE
skinparam componentStyle uml2
skinparam defaultFontName Arial

package "HairPop.ApiGateway" {
    [BraidersController] as GWController
    [ConfigureServices] as GWConfig
    [Program] as GWProgram

    note bottom of GWController
        Routes API requests
        CORS enabled
    end note
}

package "HairPop.Braiders.Api" {
    [BraidersController] as BController
    [MediatR Pipeline] as Mediator
    [Request Handlers] as Handlers
    [BraidersDbContext] as DbContext
    [ConfigureServices] as BConfig

    note bottom of Mediator
        Command Query
        Separation
    end note
}

package "HairPop.Models" {
    package "Braider Domain" {
        [Braider Entity] as BraiderEntity
        [BraiderDto] as BraiderDto
        [Braider Requests] as BraiderReqs
        [Braider Validators] as BraiderVals
    }

    package "Review Domain" {
        [Review Entity] as ReviewEntity
        [ReviewDto] as ReviewDto
        [Review Requests] as ReviewReqs
        [Review Validators] as ReviewVals
    }

    package "User Domain" {
        [User Entity] as UserEntity
        [UserDto] as UserDto
        [User Requests] as UserReqs
        [User Validators] as UserVals
    }
}

database "SQL Database" as DB

GWController --> BController : HTTP
BController --> Mediator : Send Request
Mediator --> BraiderVals : Validate
Mediator --> Handlers : Dispatch
Handlers --> DbContext : Data Access
Handlers --> BraiderDto : Map Result
DbContext --> DB : EF Core

Handlers ..> BraiderEntity : Uses
Handlers ..> BraiderReqs : Handles

@enduml
